{"version":3,"sources":["node_modules/rc-menu/lib/MenuMixin.js"],"names":["Object","defineProperty","exports","value","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_extends2","_extends3","_react","_react2","_reactDom","_reactDom2","_KeyCode","_KeyCode2","_createChainedFunction","_createChainedFunction2","_classnames","_classnames2","_domScrollIntoView","_domScrollIntoView2","_util","_DOMWrap","_DOMWrap2","obj","__esModule","allDisabled","arr","length","every","c","props","disabled","getActiveKey","originalActiveKey","activeKey","children","eventKey","found","loopMenuItem","i","getKeyFromChildrenIndex","defaultActiveFirst","saveRef","index","subIndex","undefined","instanceArray","MenuMixin","propTypes","focusable","PropTypes","bool","multiple","style","object","visible","string","selectedKeys","arrayOf","defaultSelectedKeys","defaultOpenKeys","openKeys","any","getDefaultProps","prefixCls","className","mode","level","inlineIndent","getInitialState","componentWillReceiveProps","nextProps","state","setState","shouldComponentUpdate","componentWillMount","onKeyDown","e","_this","keyCode","handled","getFlatInstanceArray","forEach","active","activeItem","UP","DOWN","step","preventDefault","findDOMNode","onlyScrollIfNeeded","getOpenChangesOnItemHover","key","hover","trigger","closeSubMenuOnMouseLeave","item","isSubMenu","filter","originalEvent","open","hasInnerArray","some","a","Array","isArray","push","apply","renderCommonMenuItem","child","extraProps","childProps","isActive","newChildProps","renderMenuItem","rootPrefixCls","parentMenu","ref","bind","onItemHover","onClick","openTransitionName","getOpenTransitionName","openAnimation","onOpenChange","onDeselect","onDestroy","onSelect","openSubMenuOnMouseEnter","cloneElement","renderRoot","_classes","classes","domProps","role","id","tabIndex","createElement","tag","hiddenClassName","Children","map","direction","len","concat","reverse","activeIndex","ci","slice","start","module"],"mappings":"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","file":"MenuMixin.js","sourceRoot":"/Users/creator/workspace/furuida","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _KeyCode = require('rc-util/lib/KeyCode');\n\nvar _KeyCode2 = _interopRequireDefault(_KeyCode);\n\nvar _createChainedFunction = require('rc-util/lib/createChainedFunction');\n\nvar _createChainedFunction2 = _interopRequireDefault(_createChainedFunction);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _domScrollIntoView = require('dom-scroll-into-view');\n\nvar _domScrollIntoView2 = _interopRequireDefault(_domScrollIntoView);\n\nvar _util = require('./util');\n\nvar _DOMWrap = require('./DOMWrap');\n\nvar _DOMWrap2 = _interopRequireDefault(_DOMWrap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found = void 0;\n    (0, _util.loopMenuItem)(children, function (c, i) {\n      if (c && !c.props.disabled && activeKey === (0, _util.getKeyFromChildrenIndex)(c, eventKey, i)) {\n        found = true;\n      }\n    });\n    if (found) {\n      return activeKey;\n    }\n  }\n  activeKey = null;\n  if (props.defaultActiveFirst) {\n    (0, _util.loopMenuItem)(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = (0, _util.getKeyFromChildrenIndex)(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n  return activeKey;\n}\n\nfunction saveRef(index, subIndex, c) {\n  if (c) {\n    if (subIndex !== undefined) {\n      this.instanceArray[index] = this.instanceArray[index] || [];\n      this.instanceArray[index][subIndex] = c;\n    } else {\n      this.instanceArray[index] = c;\n    }\n  }\n}\n\nvar MenuMixin = {\n  propTypes: {\n    focusable: _react.PropTypes.bool,\n    multiple: _react.PropTypes.bool,\n    style: _react.PropTypes.object,\n    defaultActiveFirst: _react.PropTypes.bool,\n    visible: _react.PropTypes.bool,\n    activeKey: _react.PropTypes.string,\n    selectedKeys: _react.PropTypes.arrayOf(_react.PropTypes.string),\n    defaultSelectedKeys: _react.PropTypes.arrayOf(_react.PropTypes.string),\n    defaultOpenKeys: _react.PropTypes.arrayOf(_react.PropTypes.string),\n    openKeys: _react.PropTypes.arrayOf(_react.PropTypes.string),\n    children: _react.PropTypes.any\n  },\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      prefixCls: 'rc-menu',\n      className: '',\n      mode: 'vertical',\n      level: 1,\n      inlineIndent: 24,\n      visible: true,\n      focusable: true,\n      style: {}\n    };\n  },\n  getInitialState: function getInitialState() {\n    var props = this.props;\n    return {\n      activeKey: getActiveKey(props, props.activeKey)\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n    var props = void 0;\n    if ('activeKey' in nextProps) {\n      props = {\n        activeKey: getActiveKey(nextProps, nextProps.activeKey)\n      };\n    } else {\n      var originalActiveKey = this.state.activeKey;\n      var activeKey = getActiveKey(nextProps, originalActiveKey);\n      // fix: this.setState(), parent.render(),\n      if (activeKey !== originalActiveKey) {\n        props = {\n          activeKey: activeKey\n        };\n      }\n    }\n    if (props) {\n      this.setState(props);\n    }\n  },\n  shouldComponentUpdate: function shouldComponentUpdate(nextProps) {\n    return this.props.visible || nextProps.visible;\n  },\n  componentWillMount: function componentWillMount() {\n    this.instanceArray = [];\n  },\n\n\n  // all keyboard events callbacks run from here at first\n  onKeyDown: function onKeyDown(e) {\n    var _this = this;\n\n    var keyCode = e.keyCode;\n    var handled = void 0;\n    this.getFlatInstanceArray().forEach(function (obj) {\n      if (obj && obj.props.active) {\n        handled = obj.onKeyDown(e);\n      }\n    });\n    if (handled) {\n      return 1;\n    }\n    var activeItem = null;\n    if (keyCode === _KeyCode2[\"default\"].UP || keyCode === _KeyCode2[\"default\"].DOWN) {\n      activeItem = this.step(keyCode === _KeyCode2[\"default\"].UP ? -1 : 1);\n    }\n    if (activeItem) {\n      e.preventDefault();\n      this.setState({\n        activeKey: activeItem.props.eventKey\n      }, function () {\n        (0, _domScrollIntoView2[\"default\"])(_reactDom2[\"default\"].findDOMNode(activeItem), _reactDom2[\"default\"].findDOMNode(_this), {\n          onlyScrollIfNeeded: true\n        });\n      });\n      return 1;\n    } else if (activeItem === undefined) {\n      e.preventDefault();\n      this.setState({\n        activeKey: null\n      });\n      return 1;\n    }\n  },\n  getOpenChangesOnItemHover: function getOpenChangesOnItemHover(e) {\n    var mode = this.props.mode;\n    var key = e.key,\n        hover = e.hover,\n        trigger = e.trigger;\n\n    var activeKey = this.state.activeKey;\n    if (!trigger || hover || this.props.closeSubMenuOnMouseLeave || !e.item.isSubMenu || mode === 'inline') {\n      this.setState({\n        activeKey: hover ? key : null\n      });\n    } else {}\n    // keep active for sub menu for click active\n    // empty\n\n    // clear last open status\n    if (hover && mode !== 'inline') {\n      var activeItem = this.getFlatInstanceArray().filter(function (c) {\n        return c && c.props.eventKey === activeKey;\n      })[0];\n      if (activeItem && activeItem.isSubMenu && activeItem.props.eventKey !== key) {\n        return {\n          item: activeItem,\n          originalEvent: e,\n          key: activeItem.props.eventKey,\n          open: false\n        };\n      }\n    }\n    return [];\n  },\n  getFlatInstanceArray: function getFlatInstanceArray() {\n    var instanceArray = this.instanceArray;\n    var hasInnerArray = instanceArray.some(function (a) {\n      return Array.isArray(a);\n    });\n    if (hasInnerArray) {\n      instanceArray = [];\n      this.instanceArray.forEach(function (a) {\n        if (Array.isArray(a)) {\n          instanceArray.push.apply(instanceArray, a);\n        } else {\n          instanceArray.push(a);\n        }\n      });\n      this.instanceArray = instanceArray;\n    }\n    return instanceArray;\n  },\n  renderCommonMenuItem: function renderCommonMenuItem(child, i, subIndex, extraProps) {\n    var state = this.state;\n    var props = this.props;\n    var key = (0, _util.getKeyFromChildrenIndex)(child, props.eventKey, i);\n    var childProps = child.props;\n    var isActive = key === state.activeKey;\n    var newChildProps = (0, _extends3[\"default\"])({\n      mode: props.mode,\n      level: props.level,\n      inlineIndent: props.inlineIndent,\n      renderMenuItem: this.renderMenuItem,\n      rootPrefixCls: props.prefixCls,\n      index: i,\n      parentMenu: this,\n      ref: childProps.disabled ? undefined : (0, _createChainedFunction2[\"default\"])(child.ref, saveRef.bind(this, i, subIndex)),\n      eventKey: key,\n      closeSubMenuOnMouseLeave: props.closeSubMenuOnMouseLeave,\n      onItemHover: this.onItemHover,\n      active: !childProps.disabled && isActive,\n      multiple: props.multiple,\n      onClick: this.onClick,\n      openTransitionName: this.getOpenTransitionName(),\n      openAnimation: props.openAnimation,\n      onOpenChange: this.onOpenChange,\n      onDeselect: this.onDeselect,\n      onDestroy: this.onDestroy,\n      onSelect: this.onSelect\n    }, extraProps);\n    if (props.mode === 'inline') {\n      newChildProps.closeSubMenuOnMouseLeave = newChildProps.openSubMenuOnMouseEnter = false;\n    }\n    return _react2[\"default\"].cloneElement(child, newChildProps);\n  },\n  renderRoot: function renderRoot(props) {\n    var _classes;\n\n    this.instanceArray = [];\n    var classes = (_classes = {}, (0, _defineProperty3[\"default\"])(_classes, props.prefixCls, 1), (0, _defineProperty3[\"default\"])(_classes, props.prefixCls + '-' + props.mode, 1), (0, _defineProperty3[\"default\"])(_classes, props.className, !!props.className), _classes);\n    var domProps = {\n      className: (0, _classnames2[\"default\"])(classes),\n      role: 'menu',\n      'aria-activedescendant': ''\n    };\n    if (props.id) {\n      domProps.id = props.id;\n    }\n    if (props.focusable) {\n      domProps.tabIndex = '0';\n      domProps.onKeyDown = this.onKeyDown;\n    }\n    return (\n      // ESLint is not smart enough to know that the type of `children` was checked.\n      /* eslint-disable */\n      _react2[\"default\"].createElement(\n        _DOMWrap2[\"default\"],\n        (0, _extends3[\"default\"])({\n          style: props.style,\n          tag: 'ul',\n          hiddenClassName: props.prefixCls + '-hidden',\n          visible: props.visible\n        }, domProps),\n        _react2[\"default\"].Children.map(props.children, this.renderMenuItem)\n      )\n      /*eslint-enable */\n\n    );\n  },\n  step: function step(direction) {\n    var children = this.getFlatInstanceArray();\n    var activeKey = this.state.activeKey;\n    var len = children.length;\n    if (!len) {\n      return null;\n    }\n    if (direction < 0) {\n      children = children.concat().reverse();\n    }\n    // find current activeIndex\n    var activeIndex = -1;\n    children.every(function (c, ci) {\n      if (c && c.props.eventKey === activeKey) {\n        activeIndex = ci;\n        return false;\n      }\n      return true;\n    });\n    if (!this.props.defaultActiveFirst && activeIndex !== -1) {\n      if (allDisabled(children.slice(activeIndex, len - 1))) {\n        return undefined;\n      }\n    }\n    var start = (activeIndex + 1) % len;\n    var i = start;\n    for (;;) {\n      var child = children[i];\n      if (!child || child.props.disabled) {\n        i = (i + 1 + len) % len;\n        // complete a loop\n        if (i === start) {\n          return null;\n        }\n      } else {\n        return child;\n      }\n    }\n  }\n};\n\nexports[\"default\"] = MenuMixin;\nmodule.exports = exports['default'];"]}