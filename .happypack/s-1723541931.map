{"version":3,"sources":["node_modules/history/lib/HashProtocol.js"],"names":["exports","__esModule","replaceLocation","pushLocation","startListener","getCurrentLocation","go","getUserConfirmation","undefined","_BrowserProtocol","require","Object","defineProperty","enumerable","get","_warning","_warning2","_interopRequireDefault","_LocationUtils","_DOMUtils","_DOMStateStorage","_PathUtils","obj","default","HashChangeEvent","getHashPath","href","window","location","hashIndex","indexOf","substring","pushHashPath","path","hash","replaceHashPath","replace","slice","pathCoder","queryKey","decodePath","key","getQueryStringValueFromPath","state","stripQueryStringValueFromPath","readState","init","parsePath","createLocation","prevLocation","listener","handleHashChange","encodedPath","encodePath","currentLocation","addEventListener","removeEventListener","updateLocation","updateHash","createPath","addQueryStringValueToPath","saveState","process","env","NODE_ENV"],"mappings":"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","file":"HashProtocol.js","sourceRoot":"/Users/creator/workspace/furuida","sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.replaceLocation = exports.pushLocation = exports.startListener = exports.getCurrentLocation = exports.go = exports.getUserConfirmation = undefined;\n\nvar _BrowserProtocol = require('./BrowserProtocol');\n\nObject.defineProperty(exports, 'getUserConfirmation', {\n  enumerable: true,\n  get: function get() {\n    return _BrowserProtocol.getUserConfirmation;\n  }\n});\nObject.defineProperty(exports, 'go', {\n  enumerable: true,\n  get: function get() {\n    return _BrowserProtocol.go;\n  }\n});\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _LocationUtils = require('./LocationUtils');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _PathUtils = require('./PathUtils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HashChangeEvent = 'hashchange';\n\nvar getHashPath = function getHashPath() {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var hashIndex = href.indexOf('#');\n  return hashIndex === -1 ? '' : href.substring(hashIndex + 1);\n};\n\nvar pushHashPath = function pushHashPath(path) {\n  return window.location.hash = path;\n};\n\nvar replaceHashPath = function replaceHashPath(path) {\n  var hashIndex = window.location.href.indexOf('#');\n\n  window.location.replace(window.location.href.slice(0, hashIndex >= 0 ? hashIndex : 0) + '#' + path);\n};\n\nvar getCurrentLocation = exports.getCurrentLocation = function getCurrentLocation(pathCoder, queryKey) {\n  var path = pathCoder.decodePath(getHashPath());\n  var key = (0, _PathUtils.getQueryStringValueFromPath)(path, queryKey);\n\n  var state = void 0;\n  if (key) {\n    path = (0, _PathUtils.stripQueryStringValueFromPath)(path, queryKey);\n    state = (0, _DOMStateStorage.readState)(key);\n  }\n\n  var init = (0, _PathUtils.parsePath)(path);\n  init.state = state;\n\n  return (0, _LocationUtils.createLocation)(init, undefined, key);\n};\n\nvar prevLocation = void 0;\n\nvar startListener = exports.startListener = function startListener(listener, pathCoder, queryKey) {\n  var handleHashChange = function handleHashChange() {\n    var path = getHashPath();\n    var encodedPath = pathCoder.encodePath(path);\n\n    if (path !== encodedPath) {\n      // Always be sure we have a properly-encoded hash.\n      replaceHashPath(encodedPath);\n    } else {\n      var currentLocation = getCurrentLocation(pathCoder, queryKey);\n\n      if (prevLocation && currentLocation.key && prevLocation.key === currentLocation.key) return; // Ignore extraneous hashchange events\n\n      prevLocation = currentLocation;\n\n      listener(currentLocation);\n    }\n  };\n\n  // Ensure the hash is encoded properly.\n  var path = getHashPath();\n  var encodedPath = pathCoder.encodePath(path);\n\n  if (path !== encodedPath) replaceHashPath(encodedPath);\n\n  (0, _DOMUtils.addEventListener)(window, HashChangeEvent, handleHashChange);\n\n  return function () {\n    return (0, _DOMUtils.removeEventListener)(window, HashChangeEvent, handleHashChange);\n  };\n};\n\nvar updateLocation = function updateLocation(location, pathCoder, queryKey, updateHash) {\n  var state = location.state,\n      key = location.key;\n\n\n  var path = pathCoder.encodePath((0, _PathUtils.createPath)(location));\n\n  if (state !== undefined) {\n    path = (0, _PathUtils.addQueryStringValueToPath)(path, queryKey, key);\n    (0, _DOMStateStorage.saveState)(key, state);\n  }\n\n  prevLocation = location;\n\n  updateHash(path);\n};\n\nvar pushLocation = exports.pushLocation = function pushLocation(location, pathCoder, queryKey) {\n  return updateLocation(location, pathCoder, queryKey, function (path) {\n    if (getHashPath() !== path) {\n      pushHashPath(path);\n    } else {\n      process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(false, 'You cannot PUSH the same path using hash history') : void 0;\n    }\n  });\n};\n\nvar replaceLocation = exports.replaceLocation = function replaceLocation(location, pathCoder, queryKey) {\n  return updateLocation(location, pathCoder, queryKey, function (path) {\n    if (getHashPath() !== path) replaceHashPath(path);\n  });\n};"]}