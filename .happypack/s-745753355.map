{"version":3,"sources":["node_modules/dom-scroll-into-view/lib/dom-scroll-into-view.js"],"names":["util","require","scrollIntoView","elem","container","config","nodeType","getWindow","allowHorizontalScroll","onlyScrollIfNeeded","alignWithTop","alignWithLeft","offsetTop","offsetLeft","offsetBottom","offsetRight","undefined","isWin","isWindow","elemOffset","offset","eh","outerHeight","ew","outerWidth","containerOffset","ch","cw","containerScroll","diffTop","diffBottom","win","winScroll","ww","wh","height","width","left","scrollLeft","top","scrollTop","clientHeight","clientWidth","parseFloat","css","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,OAAOC,QAAQ,QAAR,CAAX;;AAEA,SAASC,cAAT,CAAwBC,IAAxB,EAA8BC,SAA9B,EAAyCC,MAAzC,EAAiD;AAC/CA,WAASA,UAAU,EAAnB;AACA;AACA,MAAID,UAAUE,QAAV,KAAuB,CAA3B,EAA8B;AAC5BF,gBAAYJ,KAAKO,SAAL,CAAeH,SAAf,CAAZ;AACD;;AAED,MAAII,wBAAwBH,OAAOG,qBAAnC;AACA,MAAIC,qBAAqBJ,OAAOI,kBAAhC;AACA,MAAIC,eAAeL,OAAOK,YAA1B;AACA,MAAIC,gBAAgBN,OAAOM,aAA3B;AACA,MAAIC,YAAYP,OAAOO,SAAP,IAAoB,CAApC;AACA,MAAIC,aAAaR,OAAOQ,UAAP,IAAqB,CAAtC;AACA,MAAIC,eAAeT,OAAOS,YAAP,IAAuB,CAA1C;AACA,MAAIC,cAAcV,OAAOU,WAAP,IAAsB,CAAxC;;AAEAP,0BAAwBA,0BAA0BQ,SAA1B,GAAsC,IAAtC,GAA6CR,qBAArE;;AAEA,MAAIS,QAAQjB,KAAKkB,QAAL,CAAcd,SAAd,CAAZ;AACA,MAAIe,aAAanB,KAAKoB,MAAL,CAAYjB,IAAZ,CAAjB;AACA,MAAIkB,KAAKrB,KAAKsB,WAAL,CAAiBnB,IAAjB,CAAT;AACA,MAAIoB,KAAKvB,KAAKwB,UAAL,CAAgBrB,IAAhB,CAAT;AACA,MAAIsB,kBAAkBT,SAAtB;AACA,MAAIU,KAAKV,SAAT;AACA,MAAIW,KAAKX,SAAT;AACA,MAAIY,kBAAkBZ,SAAtB;AACA,MAAIa,UAAUb,SAAd;AACA,MAAIc,aAAad,SAAjB;AACA,MAAIe,MAAMf,SAAV;AACA,MAAIgB,YAAYhB,SAAhB;AACA,MAAIiB,KAAKjB,SAAT;AACA,MAAIkB,KAAKlB,SAAT;;AAEA,MAAIC,KAAJ,EAAW;AACTc,UAAM3B,SAAN;AACA8B,SAAKlC,KAAKmC,MAAL,CAAYJ,GAAZ,CAAL;AACAE,SAAKjC,KAAKoC,KAAL,CAAWL,GAAX,CAAL;AACAC,gBAAY;AACVK,YAAMrC,KAAKsC,UAAL,CAAgBP,GAAhB,CADI;AAEVQ,WAAKvC,KAAKwC,SAAL,CAAeT,GAAf;AAFK,KAAZ;AAIA;AACAF,cAAU;AACRQ,YAAMlB,WAAWkB,IAAX,GAAkBL,UAAUK,IAA5B,GAAmCxB,UADjC;AAER0B,WAAKpB,WAAWoB,GAAX,GAAiBP,UAAUO,GAA3B,GAAiC3B;AAF9B,KAAV;AAIAkB,iBAAa;AACXO,YAAMlB,WAAWkB,IAAX,GAAkBd,EAAlB,IAAwBS,UAAUK,IAAV,GAAiBJ,EAAzC,IAA+ClB,WAD1C;AAEXwB,WAAKpB,WAAWoB,GAAX,GAAiBlB,EAAjB,IAAuBW,UAAUO,GAAV,GAAgBL,EAAvC,IAA6CpB;AAFvC,KAAb;AAIAc,sBAAkBI,SAAlB;AACD,GAlBD,MAkBO;AACLP,sBAAkBzB,KAAKoB,MAAL,CAAYhB,SAAZ,CAAlB;AACAsB,SAAKtB,UAAUqC,YAAf;AACAd,SAAKvB,UAAUsC,WAAf;AACAd,sBAAkB;AAChBS,YAAMjC,UAAUkC,UADA;AAEhBC,WAAKnC,UAAUoC;AAFC,KAAlB;AAIA;AACA;AACAX,cAAU;AACRQ,YAAMlB,WAAWkB,IAAX,IAAmBZ,gBAAgBY,IAAhB,IAAwBM,WAAW3C,KAAK4C,GAAL,CAASxC,SAAT,EAAoB,iBAApB,CAAX,KAAsD,CAA9E,CAAnB,IAAuGS,UADrG;AAER0B,WAAKpB,WAAWoB,GAAX,IAAkBd,gBAAgBc,GAAhB,IAAuBI,WAAW3C,KAAK4C,GAAL,CAASxC,SAAT,EAAoB,gBAApB,CAAX,KAAqD,CAA5E,CAAlB,IAAoGQ;AAFjG,KAAV;AAIAkB,iBAAa;AACXO,YAAMlB,WAAWkB,IAAX,GAAkBd,EAAlB,IAAwBE,gBAAgBY,IAAhB,GAAuBV,EAAvB,IAA6BgB,WAAW3C,KAAK4C,GAAL,CAASxC,SAAT,EAAoB,kBAApB,CAAX,KAAuD,CAApF,CAAxB,IAAkHW,WAD7G;AAEXwB,WAAKpB,WAAWoB,GAAX,GAAiBlB,EAAjB,IAAuBI,gBAAgBc,GAAhB,GAAsBb,EAAtB,IAA4BiB,WAAW3C,KAAK4C,GAAL,CAASxC,SAAT,EAAoB,mBAApB,CAAX,KAAwD,CAApF,CAAvB,IAAiHU;AAF3G,KAAb;AAID;;AAED,MAAIe,QAAQU,GAAR,GAAc,CAAd,IAAmBT,WAAWS,GAAX,GAAiB,CAAxC,EAA2C;AACzC;AACA,QAAI7B,iBAAiB,IAArB,EAA2B;AACzBV,WAAKwC,SAAL,CAAepC,SAAf,EAA0BwB,gBAAgBW,GAAhB,GAAsBV,QAAQU,GAAxD;AACD,KAFD,MAEO,IAAI7B,iBAAiB,KAArB,EAA4B;AACjCV,WAAKwC,SAAL,CAAepC,SAAf,EAA0BwB,gBAAgBW,GAAhB,GAAsBT,WAAWS,GAA3D;AACD,KAFM,MAEA;AACL;AACA,UAAIV,QAAQU,GAAR,GAAc,CAAlB,EAAqB;AACnBvC,aAAKwC,SAAL,CAAepC,SAAf,EAA0BwB,gBAAgBW,GAAhB,GAAsBV,QAAQU,GAAxD;AACD,OAFD,MAEO;AACLvC,aAAKwC,SAAL,CAAepC,SAAf,EAA0BwB,gBAAgBW,GAAhB,GAAsBT,WAAWS,GAA3D;AACD;AACF;AACF,GAdD,MAcO;AACL,QAAI,CAAC9B,kBAAL,EAAyB;AACvBC,qBAAeA,iBAAiBM,SAAjB,GAA6B,IAA7B,GAAoC,CAAC,CAACN,YAArD;AACA,UAAIA,YAAJ,EAAkB;AAChBV,aAAKwC,SAAL,CAAepC,SAAf,EAA0BwB,gBAAgBW,GAAhB,GAAsBV,QAAQU,GAAxD;AACD,OAFD,MAEO;AACLvC,aAAKwC,SAAL,CAAepC,SAAf,EAA0BwB,gBAAgBW,GAAhB,GAAsBT,WAAWS,GAA3D;AACD;AACF;AACF;;AAED,MAAI/B,qBAAJ,EAA2B;AACzB,QAAIqB,QAAQQ,IAAR,GAAe,CAAf,IAAoBP,WAAWO,IAAX,GAAkB,CAA1C,EAA6C;AAC3C;AACA,UAAI1B,kBAAkB,IAAtB,EAA4B;AAC1BX,aAAKsC,UAAL,CAAgBlC,SAAhB,EAA2BwB,gBAAgBS,IAAhB,GAAuBR,QAAQQ,IAA1D;AACD,OAFD,MAEO,IAAI1B,kBAAkB,KAAtB,EAA6B;AAClCX,aAAKsC,UAAL,CAAgBlC,SAAhB,EAA2BwB,gBAAgBS,IAAhB,GAAuBP,WAAWO,IAA7D;AACD,OAFM,MAEA;AACL;AACA,YAAIR,QAAQQ,IAAR,GAAe,CAAnB,EAAsB;AACpBrC,eAAKsC,UAAL,CAAgBlC,SAAhB,EAA2BwB,gBAAgBS,IAAhB,GAAuBR,QAAQQ,IAA1D;AACD,SAFD,MAEO;AACLrC,eAAKsC,UAAL,CAAgBlC,SAAhB,EAA2BwB,gBAAgBS,IAAhB,GAAuBP,WAAWO,IAA7D;AACD;AACF;AACF,KAdD,MAcO;AACL,UAAI,CAAC5B,kBAAL,EAAyB;AACvBE,wBAAgBA,kBAAkBK,SAAlB,GAA8B,IAA9B,GAAqC,CAAC,CAACL,aAAvD;AACA,YAAIA,aAAJ,EAAmB;AACjBX,eAAKsC,UAAL,CAAgBlC,SAAhB,EAA2BwB,gBAAgBS,IAAhB,GAAuBR,QAAQQ,IAA1D;AACD,SAFD,MAEO;AACLrC,eAAKsC,UAAL,CAAgBlC,SAAhB,EAA2BwB,gBAAgBS,IAAhB,GAAuBP,WAAWO,IAA7D;AACD;AACF;AACF;AACF;AACF;;AAEDQ,OAAOC,OAAP,GAAiB5C,cAAjB","file":"dom-scroll-into-view.js","sourceRoot":"/Users/creator/workspace/furuida","sourcesContent":["'use strict';\n\nvar util = require('./util');\n\nfunction scrollIntoView(elem, container, config) {\n  config = config || {};\n  // document 归一化到 window\n  if (container.nodeType === 9) {\n    container = util.getWindow(container);\n  }\n\n  var allowHorizontalScroll = config.allowHorizontalScroll;\n  var onlyScrollIfNeeded = config.onlyScrollIfNeeded;\n  var alignWithTop = config.alignWithTop;\n  var alignWithLeft = config.alignWithLeft;\n  var offsetTop = config.offsetTop || 0;\n  var offsetLeft = config.offsetLeft || 0;\n  var offsetBottom = config.offsetBottom || 0;\n  var offsetRight = config.offsetRight || 0;\n\n  allowHorizontalScroll = allowHorizontalScroll === undefined ? true : allowHorizontalScroll;\n\n  var isWin = util.isWindow(container);\n  var elemOffset = util.offset(elem);\n  var eh = util.outerHeight(elem);\n  var ew = util.outerWidth(elem);\n  var containerOffset = undefined;\n  var ch = undefined;\n  var cw = undefined;\n  var containerScroll = undefined;\n  var diffTop = undefined;\n  var diffBottom = undefined;\n  var win = undefined;\n  var winScroll = undefined;\n  var ww = undefined;\n  var wh = undefined;\n\n  if (isWin) {\n    win = container;\n    wh = util.height(win);\n    ww = util.width(win);\n    winScroll = {\n      left: util.scrollLeft(win),\n      top: util.scrollTop(win)\n    };\n    // elem 相对 container 可视视窗的距离\n    diffTop = {\n      left: elemOffset.left - winScroll.left - offsetLeft,\n      top: elemOffset.top - winScroll.top - offsetTop\n    };\n    diffBottom = {\n      left: elemOffset.left + ew - (winScroll.left + ww) + offsetRight,\n      top: elemOffset.top + eh - (winScroll.top + wh) + offsetBottom\n    };\n    containerScroll = winScroll;\n  } else {\n    containerOffset = util.offset(container);\n    ch = container.clientHeight;\n    cw = container.clientWidth;\n    containerScroll = {\n      left: container.scrollLeft,\n      top: container.scrollTop\n    };\n    // elem 相对 container 可视视窗的距离\n    // 注意边框, offset 是边框到根节点\n    diffTop = {\n      left: elemOffset.left - (containerOffset.left + (parseFloat(util.css(container, 'borderLeftWidth')) || 0)) - offsetLeft,\n      top: elemOffset.top - (containerOffset.top + (parseFloat(util.css(container, 'borderTopWidth')) || 0)) - offsetTop\n    };\n    diffBottom = {\n      left: elemOffset.left + ew - (containerOffset.left + cw + (parseFloat(util.css(container, 'borderRightWidth')) || 0)) + offsetRight,\n      top: elemOffset.top + eh - (containerOffset.top + ch + (parseFloat(util.css(container, 'borderBottomWidth')) || 0)) + offsetBottom\n    };\n  }\n\n  if (diffTop.top < 0 || diffBottom.top > 0) {\n    // 强制向上\n    if (alignWithTop === true) {\n      util.scrollTop(container, containerScroll.top + diffTop.top);\n    } else if (alignWithTop === false) {\n      util.scrollTop(container, containerScroll.top + diffBottom.top);\n    } else {\n      // 自动调整\n      if (diffTop.top < 0) {\n        util.scrollTop(container, containerScroll.top + diffTop.top);\n      } else {\n        util.scrollTop(container, containerScroll.top + diffBottom.top);\n      }\n    }\n  } else {\n    if (!onlyScrollIfNeeded) {\n      alignWithTop = alignWithTop === undefined ? true : !!alignWithTop;\n      if (alignWithTop) {\n        util.scrollTop(container, containerScroll.top + diffTop.top);\n      } else {\n        util.scrollTop(container, containerScroll.top + diffBottom.top);\n      }\n    }\n  }\n\n  if (allowHorizontalScroll) {\n    if (diffTop.left < 0 || diffBottom.left > 0) {\n      // 强制向上\n      if (alignWithLeft === true) {\n        util.scrollLeft(container, containerScroll.left + diffTop.left);\n      } else if (alignWithLeft === false) {\n        util.scrollLeft(container, containerScroll.left + diffBottom.left);\n      } else {\n        // 自动调整\n        if (diffTop.left < 0) {\n          util.scrollLeft(container, containerScroll.left + diffTop.left);\n        } else {\n          util.scrollLeft(container, containerScroll.left + diffBottom.left);\n        }\n      }\n    } else {\n      if (!onlyScrollIfNeeded) {\n        alignWithLeft = alignWithLeft === undefined ? true : !!alignWithLeft;\n        if (alignWithLeft) {\n          util.scrollLeft(container, containerScroll.left + diffTop.left);\n        } else {\n          util.scrollLeft(container, containerScroll.left + diffBottom.left);\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = scrollIntoView;"]}