{"version":3,"sources":["node_modules/dom-align/lib/getVisibleRectForElement.js"],"names":["Object","defineProperty","exports","value","_utils","require","_utils2","_interopRequireDefault","_getOffsetParent","_getOffsetParent2","obj","__esModule","getVisibleRectForElement","element","visibleRect","left","right","Infinity","top","bottom","el","scrollX","scrollY","winSize","doc","ownerDocument","win","defaultView","parentWindow","body","documentElement","navigator","userAgent","indexOf","clientWidth","css","pos","offset","clientLeft","clientTop","Math","max","min","clientHeight","getWindowScrollLeft","getWindowScrollTop","width","viewportWidth","height","viewportHeight","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,SAAO;AADoC,CAA7C;;AAIA,IAAIC,SAASC,QAAQ,SAAR,CAAb;;AAEA,IAAIC,UAAUC,uBAAuBH,MAAvB,CAAd;;AAEA,IAAII,mBAAmBH,QAAQ,mBAAR,CAAvB;;AAEA,IAAII,oBAAoBF,uBAAuBC,gBAAvB,CAAxB;;AAEA,SAASD,sBAAT,CAAgCG,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D;;AAEjG;;;AAGA,SAASE,wBAAT,CAAkCC,OAAlC,EAA2C;AACzC,MAAIC,cAAc;AAChBC,UAAM,CADU;AAEhBC,WAAOC,QAFS;AAGhBC,SAAK,CAHW;AAIhBC,YAAQF;AAJQ,GAAlB;AAMA,MAAIG,KAAK,CAAC,GAAGX,kBAAkB,SAAlB,CAAJ,EAAkCI,OAAlC,CAAT;AACA,MAAIQ,UAAU,KAAK,CAAnB;AACA,MAAIC,UAAU,KAAK,CAAnB;AACA,MAAIC,UAAU,KAAK,CAAnB;AACA,MAAIC,MAAMX,QAAQY,aAAlB;AACA,MAAIC,MAAMF,IAAIG,WAAJ,IAAmBH,IAAII,YAAjC;AACA,MAAIC,OAAOL,IAAIK,IAAf;AACA,MAAIC,kBAAkBN,IAAIM,eAA1B;;AAEA;AACA;AACA,SAAOV,EAAP,EAAW;AACT;AACA,QAAI,CAACW,UAAUC,SAAV,CAAoBC,OAApB,CAA4B,MAA5B,MAAwC,CAAC,CAAzC,IAA8Cb,GAAGc,WAAH,KAAmB,CAAlE;AACJ;AACA;AACA;AACAd,WAAOS,IAJH,IAIWT,OAAOU,eAJlB,IAIqCxB,QAAQ,SAAR,EAAmB6B,GAAnB,CAAuBf,EAAvB,EAA2B,UAA3B,MAA2C,SAJpF,EAI+F;AAC7F,UAAIgB,MAAM9B,QAAQ,SAAR,EAAmB+B,MAAnB,CAA0BjB,EAA1B,CAAV;AACA;AACAgB,UAAIrB,IAAJ,IAAYK,GAAGkB,UAAf;AACAF,UAAIlB,GAAJ,IAAWE,GAAGmB,SAAd;AACAzB,kBAAYI,GAAZ,GAAkBsB,KAAKC,GAAL,CAAS3B,YAAYI,GAArB,EAA0BkB,IAAIlB,GAA9B,CAAlB;AACAJ,kBAAYE,KAAZ,GAAoBwB,KAAKE,GAAL,CAAS5B,YAAYE,KAArB;AACpB;AACAoB,UAAIrB,IAAJ,GAAWK,GAAGc,WAFM,CAApB;AAGApB,kBAAYK,MAAZ,GAAqBqB,KAAKE,GAAL,CAAS5B,YAAYK,MAArB,EAA6BiB,IAAIlB,GAAJ,GAAUE,GAAGuB,YAA1C,CAArB;AACA7B,kBAAYC,IAAZ,GAAmByB,KAAKC,GAAL,CAAS3B,YAAYC,IAArB,EAA2BqB,IAAIrB,IAA/B,CAAnB;AACD,KAfD,MAeO,IAAIK,OAAOS,IAAP,IAAeT,OAAOU,eAA1B,EAA2C;AAChD;AACD;AACDV,SAAK,CAAC,GAAGX,kBAAkB,SAAlB,CAAJ,EAAkCW,EAAlC,CAAL;AACD;;AAED;AACAC,YAAUf,QAAQ,SAAR,EAAmBsC,mBAAnB,CAAuClB,GAAvC,CAAV;AACAJ,YAAUhB,QAAQ,SAAR,EAAmBuC,kBAAnB,CAAsCnB,GAAtC,CAAV;AACAZ,cAAYC,IAAZ,GAAmByB,KAAKC,GAAL,CAAS3B,YAAYC,IAArB,EAA2BM,OAA3B,CAAnB;AACAP,cAAYI,GAAZ,GAAkBsB,KAAKC,GAAL,CAAS3B,YAAYI,GAArB,EAA0BI,OAA1B,CAAlB;AACAC,YAAU;AACRuB,WAAOxC,QAAQ,SAAR,EAAmByC,aAAnB,CAAiCrB,GAAjC,CADC;AAERsB,YAAQ1C,QAAQ,SAAR,EAAmB2C,cAAnB,CAAkCvB,GAAlC;AAFA,GAAV;AAIAZ,cAAYE,KAAZ,GAAoBwB,KAAKE,GAAL,CAAS5B,YAAYE,KAArB,EAA4BK,UAAUE,QAAQuB,KAA9C,CAApB;AACAhC,cAAYK,MAAZ,GAAqBqB,KAAKE,GAAL,CAAS5B,YAAYK,MAArB,EAA6BG,UAAUC,QAAQyB,MAA/C,CAArB;AACA,SAAOlC,YAAYI,GAAZ,IAAmB,CAAnB,IAAwBJ,YAAYC,IAAZ,IAAoB,CAA5C,IAAiDD,YAAYK,MAAZ,GAAqBL,YAAYI,GAAlF,IAAyFJ,YAAYE,KAAZ,GAAoBF,YAAYC,IAAzH,GAAgID,WAAhI,GAA8I,IAArJ;AACD;;AAEDZ,QAAQ,SAAR,IAAqBU,wBAArB;AACAsC,OAAOhD,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"getVisibleRectForElement.js","sourceRoot":"/Users/creator/workspace/furuida","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _getOffsetParent = require('./getOffsetParent');\n\nvar _getOffsetParent2 = _interopRequireDefault(_getOffsetParent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * 获得元素的显示部分的区域\n */\nfunction getVisibleRectForElement(element) {\n  var visibleRect = {\n    left: 0,\n    right: Infinity,\n    top: 0,\n    bottom: Infinity\n  };\n  var el = (0, _getOffsetParent2[\"default\"])(element);\n  var scrollX = void 0;\n  var scrollY = void 0;\n  var winSize = void 0;\n  var doc = element.ownerDocument;\n  var win = doc.defaultView || doc.parentWindow;\n  var body = doc.body;\n  var documentElement = doc.documentElement;\n\n  // Determine the size of the visible rect by climbing the dom accounting for\n  // all scrollable containers.\n  while (el) {\n    // clientWidth is zero for inline block elements in ie.\n    if ((navigator.userAgent.indexOf('MSIE') === -1 || el.clientWidth !== 0) &&\n    // body may have overflow set on it, yet we still get the entire\n    // viewport. In some browsers, el.offsetParent may be\n    // document.documentElement, so check for that too.\n    el !== body && el !== documentElement && _utils2[\"default\"].css(el, 'overflow') !== 'visible') {\n      var pos = _utils2[\"default\"].offset(el);\n      // add border\n      pos.left += el.clientLeft;\n      pos.top += el.clientTop;\n      visibleRect.top = Math.max(visibleRect.top, pos.top);\n      visibleRect.right = Math.min(visibleRect.right,\n      // consider area without scrollBar\n      pos.left + el.clientWidth);\n      visibleRect.bottom = Math.min(visibleRect.bottom, pos.top + el.clientHeight);\n      visibleRect.left = Math.max(visibleRect.left, pos.left);\n    } else if (el === body || el === documentElement) {\n      break;\n    }\n    el = (0, _getOffsetParent2[\"default\"])(el);\n  }\n\n  // Clip by window's viewport.\n  scrollX = _utils2[\"default\"].getWindowScrollLeft(win);\n  scrollY = _utils2[\"default\"].getWindowScrollTop(win);\n  visibleRect.left = Math.max(visibleRect.left, scrollX);\n  visibleRect.top = Math.max(visibleRect.top, scrollY);\n  winSize = {\n    width: _utils2[\"default\"].viewportWidth(win),\n    height: _utils2[\"default\"].viewportHeight(win)\n  };\n  visibleRect.right = Math.min(visibleRect.right, scrollX + winSize.width);\n  visibleRect.bottom = Math.min(visibleRect.bottom, scrollY + winSize.height);\n  return visibleRect.top >= 0 && visibleRect.left >= 0 && visibleRect.bottom > visibleRect.top && visibleRect.right > visibleRect.left ? visibleRect : null;\n}\n\nexports[\"default\"] = getVisibleRectForElement;\nmodule.exports = exports['default'];"]}