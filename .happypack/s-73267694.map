{"version":3,"sources":["node_modules/rc-align/lib/Align.js"],"names":["Object","defineProperty","exports","value","_react","require","_react2","_interopRequireDefault","_reactDom","_reactDom2","_domAlign","_domAlign2","_addEventListener","_addEventListener2","_isWindow","_isWindow2","obj","__esModule","buffer","fn","ms","timer","clear","clearTimeout","bufferFn","setTimeout","Align","createClass","displayName","propTypes","childrenProps","PropTypes","object","align","isRequired","target","func","onAlign","monitorBufferTime","number","monitorWindowResize","bool","disabled","children","any","getDefaultProps","window","componentDidMount","props","forceAlign","startMonitorWindowResize","componentDidUpdate","prevProps","reAlign","lastTarget","currentTarget","stopMonitorWindowResize","componentWillUnmount","resizeHandler","bufferMonitor","remove","source","findDOMNode","render","_props","child","Children","only","newProps","prop","hasOwnProperty","cloneElement","module"],"mappings":"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","file":"Align.js","sourceRoot":"/Users/creator/workspace/furuida","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _domAlign = require('dom-align');\n\nvar _domAlign2 = _interopRequireDefault(_domAlign);\n\nvar _addEventListener = require('rc-util/lib/Dom/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _isWindow = require('./isWindow');\n\nvar _isWindow2 = _interopRequireDefault(_isWindow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction buffer(fn, ms) {\n  var timer = void 0;\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  }\n\n  function bufferFn() {\n    clear();\n    timer = setTimeout(fn, ms);\n  }\n\n  bufferFn.clear = clear;\n\n  return bufferFn;\n}\n\nvar Align = _react2[\"default\"].createClass({\n  displayName: 'Align',\n\n  propTypes: {\n    childrenProps: _react.PropTypes.object,\n    align: _react.PropTypes.object.isRequired,\n    target: _react.PropTypes.func,\n    onAlign: _react.PropTypes.func,\n    monitorBufferTime: _react.PropTypes.number,\n    monitorWindowResize: _react.PropTypes.bool,\n    disabled: _react.PropTypes.bool,\n    children: _react.PropTypes.any\n  },\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      target: function target() {\n        return window;\n      },\n      onAlign: function onAlign() {},\n\n      monitorBufferTime: 50,\n      monitorWindowResize: false,\n      disabled: false\n    };\n  },\n  componentDidMount: function componentDidMount() {\n    var props = this.props;\n    // if parent ref not attached .... use document.getElementById\n    this.forceAlign();\n    if (!props.disabled && props.monitorWindowResize) {\n      this.startMonitorWindowResize();\n    }\n  },\n  componentDidUpdate: function componentDidUpdate(prevProps) {\n    var reAlign = false;\n    var props = this.props;\n\n    if (!props.disabled) {\n      if (prevProps.disabled || prevProps.align !== props.align) {\n        reAlign = true;\n      } else {\n        var lastTarget = prevProps.target();\n        var currentTarget = props.target();\n        if ((0, _isWindow2[\"default\"])(lastTarget) && (0, _isWindow2[\"default\"])(currentTarget)) {\n          reAlign = false;\n        } else if (lastTarget !== currentTarget) {\n          reAlign = true;\n        }\n      }\n    }\n\n    if (reAlign) {\n      this.forceAlign();\n    }\n\n    if (props.monitorWindowResize && !props.disabled) {\n      this.startMonitorWindowResize();\n    } else {\n      this.stopMonitorWindowResize();\n    }\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    this.stopMonitorWindowResize();\n  },\n  startMonitorWindowResize: function startMonitorWindowResize() {\n    if (!this.resizeHandler) {\n      this.bufferMonitor = buffer(this.forceAlign, this.props.monitorBufferTime);\n      this.resizeHandler = (0, _addEventListener2[\"default\"])(window, 'resize', this.bufferMonitor);\n    }\n  },\n  stopMonitorWindowResize: function stopMonitorWindowResize() {\n    if (this.resizeHandler) {\n      this.bufferMonitor.clear();\n      this.resizeHandler.remove();\n      this.resizeHandler = null;\n    }\n  },\n  forceAlign: function forceAlign() {\n    var props = this.props;\n    if (!props.disabled) {\n      var source = _reactDom2[\"default\"].findDOMNode(this);\n      props.onAlign(source, (0, _domAlign2[\"default\"])(source, props.target(), props.align));\n    }\n  },\n  render: function render() {\n    var _props = this.props,\n        childrenProps = _props.childrenProps,\n        children = _props.children;\n\n    var child = _react2[\"default\"].Children.only(children);\n    if (childrenProps) {\n      var newProps = {};\n      for (var prop in childrenProps) {\n        if (childrenProps.hasOwnProperty(prop)) {\n          newProps[prop] = this.props[childrenProps[prop]];\n        }\n      }\n      return _react2[\"default\"].cloneElement(child, newProps);\n    }\n    return child;\n  }\n});\n\nexports[\"default\"] = Align;\nmodule.exports = exports['default'];"]}